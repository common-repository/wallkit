!function(){var e=document.querySelector("body");e.classList.contains("wkwp-user-hide")||e.classList.add("wkwp-user-hide")}(),function(){window.wkwpCheckAccessPromise=null;var s="",r="";function t(){let r=window.wallkitSettings||{},t=document.querySelector(r.config.inline_modals_selector);k("F=>runInitWkProcess.wkSettings",r),void 0!==r.integration&&(r.config.inline_modals_selector&&t&&t.dataset.modal&&(k("F=>runInitWkProcess.inlineModalsContainer","\ninline_modals_selector",r.config.inline_modals_selector,"\ninlineModalsContainer",t,"\ninlineModalsContainer.dataset.modal",t.dataset.modal),window.location.hash="WkModal("+t.dataset.modal+")"),window.wk=window.wk||[],window.wk.push(["ready",e=>{k("F=>runInitWkProcess.window.wk ready callback",window.wk,e),k("F=>runInitWkProcess.window.wk.authentication",window.wk.authentication,"\nwindow.wk.authentication.isAuthenticated()=>",window.wk.authentication.isAuthenticated()),n(),i(!1),window.wk.on("wk-event-auth",function(){k("E=>wk.events.subscribe=>wk-event-auth"),n(),i()}),window.wk.on("wk-event-registration",function(){k("E=>wk.events.subscribe=>wk-event-registration"),n(),i()}),window.wk.on("success-auth",function({register:e}){k("E=>wk.events.subscribe=>success-auth",e),!0===r.config.wk_auth_migrated_users&&(e=document.querySelector(".wk-user-update-info"),k("E=>wk.events.subscribe=>success-auth","\nwk_auth_migrated_users=>",r.config.wk_auth_migrated_users,"\nuserWithoutSessionInfo=>",e),e)&&o(),r.config.inline_modals_selector&&t&&window.wk.modal(r.config.wk_modal_after_sign_in),n(),i()}),window.wk.on("logout",function(){k("E=>wk.events.subscribe=>logout",r.config.reload_on_logout),!0!==r.config.reload_on_logout?(n(),i(),window.wk.popup.hide()):location.reload()}),window.wk.on("wk-event-transaction",function(){k("E=>wk.events.subscribe=>wk-event-transaction"),i()}),!0===r.config.wk_auth_migrated_users&&window.wk.on("pre-sign-in",async e=>{k("E=>wk.events.subscribe=>pre-sign-in",e);var t,n,i=document.querySelector("#auth-modal-wallkit-modal-spinner");i.style.display="flex";let o=!0,s=!1,a=!1;return await Wallkit.checkUserActivity(e.email).then(e=>{k("E=>wk.events.subscribe=>pre-sign-in=>Wallkit.checkUserActivity.data",e),void 0!==e&&(void 0!==e.is_exist_sessions&&"boolean"==typeof e.is_exist_sessions&&(o=e.is_exist_sessions),void 0!==e.has_user_resource_relationship_password)&&"boolean"==typeof e.has_user_resource_relationship_password&&(a=e.has_user_resource_relationship_password)},e=>{k("E=>wk.events.subscribe=>pre-sign-in=>Wallkit.checkUserActivity.error",e)}),o||a||(k("E=>wk.events.subscribe=>pre-sign-in=>password-reset","\nis_exist_sessions=>",o,"\nuser_has_password=>",a),await window.wk.sdk.methods.client.post({path:"/firebase/password-reset",data:{email:e.email}}).then(e=>{k("E=>wk.events.subscribe=>pre-sign-in=>password-reset.responce",e),s=!0},e=>{k("E=>wk.events.subscribe=>pre-sign-in=>password-reset.error",e)})),s&&(e=document.querySelector("#wk-email-auth-form"),k("E=>wk.events.subscribe=>pre-sign-in","\nis_password_reset=>",s,"\nauthForm=>",e),(t=e.querySelector(".wk-form").querySelector(".wk-form__error"))&&(t.style.display="none"),t=document.createElement("div"),n='<div style="padding: 24px 24px 0 24px;">'+r.config.wk_auth_migrated_users_text+"</div>",t.classList.add("wk-user-update-info"),t.insertAdjacentHTML("beforeend",n),e.parentNode.insertBefore(t,e),e.style.display="none",document.addEventListener("click",p)),i.style.display="none",!0})}]),r.config.inline_modals_selector&&t&&(r.integration.ui={type:"inline",selector:r.config.inline_modals_selector}),"function"==typeof WallkitIntegration?window.wk=new WallkitIntegration(r.integration):console.log("WKWP ERROR: WallkitIntegration function does not exist"))}async function n(){let n=window.wallkitSettings||{},i=window.wallkitTranslations||{};const o=document.querySelectorAll(".wkwp-user-my-account-button");if(k("F=>wkShowUserStatus","\nwkSettings=>",n,"\naccountStatusSpanEls=>",i,"\naccountStatusSpanEls=>",o),o.length){const r=document.querySelectorAll(".wkwp-login-block"),l="https://www.gravatar.com/avatar/?d=mp",c=document.querySelectorAll(".wkwp-user-my-account-img"),u=document.querySelectorAll(".wkwp-site-logo");let t=n.integration.call.classForHandleClick||"wk-call";const w=document.querySelector("body.wkwp-user-hide");var e,s,a;k("F=>wkShowUserStatus.args","\nuserAccountBlock",r,"\nimgDefaultSrc",l,"\naccountStatusImgEls",c,"\naccountSiteLogo",u,"\nwkCallClass",t,"\nwindow.wk.authentication.isAuthenticated()=>",window.wk.authentication.isAuthenticated()),window.wkwpGetUser=new Promise((t,n)=>{window.wk.authentication.isAuthenticated()?window.wk.sdk.methods.client.get({path:"/user"}).then(e=>{k("F=>wkShowUserStatus.wkwpGetUser.wk.sdk.methods.client(/user)",e),0<e.id&&(window.wk.sdk.methods.user=e),t(e)},e=>{console.log("F=>wkShowUserStatus.wkwpGetUser ERROR",e),n(e)}):(k("F=>wkShowUserStatus.wkwpGetUser.wk.authentication.isAuthenticated()",window.wk.authentication.isAuthenticated()),n())}),await window.wkwpGetUser.then(e=>{k("F=>wkShowUserStatus.wkwpGetUser.then.response",e),k("F=>wkShowUserStatus.dispatchEvent.wkwpGetUserCompleted"),window.dispatchEvent(new CustomEvent("wkwpGetUserCompleted",{detail:e})),0<e.id&&(0<c.length&&c.forEach(e=>{e.src=window.wk.sdk.methods.user.photos.image_100,e.classList.remove(t,"wk–sign-in"),e.classList.add(t,"wk–account-settings"),e.style="display:block;"}),0<o.length&&o.forEach(e=>{(e="LI"===e.tagName?e.querySelector("a"):e).innerHTML=n.titles.myAccountButton||i.my_account||"My&nbsp;Account",e.classList.remove(t,"wk–sign-in"),e.classList.add(t,"wk–account-settings")}),0<u.length)&&u.forEach(e=>{e.style="display:none;"}),0<r.length&&r.forEach(e=>{e.style="display:block;"}),w&&w.classList.remove("wkwp-user-hide")}).catch(e=>{k("F=>wkShowUserStatus.wkwpGetUser.catch.error",e),k("F=>wkShowUserStatus.dispatchEvent.wkwpGetUserCompleted.error"),window.dispatchEvent(new CustomEvent("wkwpGetUserCompleted",{detail:!1})),0<c.length&&c.forEach(e=>{e.src=l,e.classList.remove(t,"wk–account-settings"),e.classList.add(t,"wk–sign-in"),e.style="display:none;"}),0<o.length&&o.forEach(e=>{(e="LI"===e.tagName?e.querySelector("a"):e).classList.remove(t,"wk–account-settings"),e.classList.add(t,"wk–sign-in"),e.innerHTML=n.titles.signInButton||i.sign_in||"Sign&nbsp;in"}),0<u.length&&u.forEach(e=>{e.style="display:block;"}),0<r.length&&r.forEach(e=>{e.style="display:block;"}),w&&w.classList.remove("wkwp-user-hide")}),e=window.wallkitSettings||{},s=e.integration.call.classForHandleClick||"wk-call",e.config.wk_my_account_page_url&&((a=document.querySelectorAll(".wk–sign-in")).length&&d(a,e.config.wk_my_account_page_url,[s,"wk–sign-in"]),(a=document.querySelectorAll(".wk–account-settings")).length)&&d(a,e.config.wk_my_account_page_url,[s,"wk–account-settings"])}}function d(e,n,i=[]){e&&n&&e.forEach(e=>{let t=e;i.length&&e.classList.remove(...i),(t="A"!==e.tagName?e.querySelector("a"):t)&&t.setAttribute("href",n)})}function i(e=!0){var t=window.wallkitSettings||{};if(k("F=>wkCheckPostAccess","\nwkSettings",t,"\nnewCheckAccessPromise",e,"\nwindow.wkwpCheckAccessPromise",window.wkwpCheckAccessPromise,"\nwindow.wallkitPostData",window.wallkitPostData,"\n.wkwp-paywall",document.querySelector(".wkwp-paywall")),!0===e&&(window.wkwpCheckAccessPromise=null),!window.wkwpCheckAccessPromise&&void 0!==window.wallkitPostData.config&&void 0!==window.wallkitPostData.config.check_post&&!1!==window.wallkitPostData.config.check_post&&void 0!==window.wallkitPostData.data&&void 0!==window.wallkitPostData.data.id&&""!==window.wallkitPostData.data.id&&(document.querySelector(".wkwp-paywall")||t.config.content_class_selector&&document.querySelector("."+t.config.content_class_selector)||t.config.custom_content_selector&&document.querySelector(""+t.config.custom_content_selector))){e=window.wallkitPostData.data;const i=new window.wk.content(e);k("F=>wkCheckPostAccess.checkAccess","\npostInfo",e,"\nwkPost",i),window.wkwpCheckAccessPromise=new Promise((t,n)=>{if(3===window.wallkitPostData.config.wk_paywall_display_type)return t(async function(){var e=window.wallkitPostData.data.id.split("_").slice(-1),t={post_id:e};var n={};Wallkit.getToken()&&(n["wk-token"]=Wallkit.getToken());Wallkit.getFirebaseToken()&&(n["firebase-token"]=Wallkit.getFirebaseToken());WallkitClient.session&&(n["wk-session"]=WallkitClient.session);k("F=>get_content_part","\npost_id",e,"\nurl_params",t,"\nheaders",n,"\nwindow.wallkitSettings.config.parse_scripts",window.wallkitSettings.config.parse_scripts);e=await fetch("/wp-json/wallkit/v1/get-content-part?"+new URLSearchParams(t).toString(),{method:"GET",headers:n}).then(e=>200===e.status&&e.json()).catch(e=>(console.log("WKWP ERROR: get_content_part->contentAccessResponce",e),!1));return k("F=>get_content_part","\ncontentAccessResponce",e),e}());i.checkAccess().then(e=>(k("F=>wkCheckPostAccess.wkPost.checkAccess",e),t(e))).catch(e=>(console.log("WKWP wkPost ERROR",e),n(e)))})}window.wkwpCheckAccessPromise&&window.wkwpCheckAccessPromise.then(t=>{switch(window.removeEventListener("unlockContent",l),k("F=>wkCheckPostAccess.wkwpCheckAccessPromise",t),window.wallkitPostData.config.wk_paywall_display_type){case 1:u(t);break;case 3:{var n=t;var i=window.wallkitSettings||{};var o=document.querySelector(".wkwp-paywall"),s=document.querySelector(".wkwp-paywall .wkwp-content-inner");let e=document.querySelector(".wkwp-paywall .wkwp-paywall-block");{var a;k("F=>checkAccessHandlingBackend","\nresponse",n,"\nwindow.wallkitPostData",window.wallkitPostData,"\npostContentWrapper",o,"\npostContentBody",s,"\npostPaywallBlock",e,"\nwkPaywallBlock",r),n.allowed?(a={contentScripts:[],contentPart:n.wp_content_part},n.wp_content_part&&i.config.parse_scripts&&(a.contentScripts=function(e){var t=[],n=document.createElement("div"),i=(n.innerHTML=e,n.getElementsByTagName("script"));k("F=>parseScripts","\ncontent",e,"\nscripts",i);for(let e=0;e<i.length;e++){var o=i[e],s=document.createElement("script");o.src?(s.src=o.src,s.async=!1):s.text=o.innerHTML,t.push(s)}return k("F=>parseScripts","\nnewScriptsElements",t),t}(n.wp_content_part),a.contentPart=function(e){k("F=>removeScriptsFromString","\ncontent",e);var t=document.createElement("div"),n=(t.innerHTML=e,t.getElementsByTagName("script"));for(;0<n.length;)n[0].parentNode.removeChild(n[0]);return k("F=>removeScriptsFromString","\ntempDiv.innerHTML",t.innerHTML),t.innerHTML}(n.wp_content_part)),k("F=>checkAccessHandlingBackend","\ncontentPart",a.contentPart,"\ncontentScripts",a.contentScripts),e&&e.remove(),s&&(s.innerHTML=a.contentPart||"",a.contentScripts&&a.contentScripts.forEach(e=>document.body.appendChild(e)),s.classList.remove("wkwp-content-blured"),s.style="display:block;")):(s&&(n=parseInt(s.dataset.paragraphs)||0,s.innerHTML=m(n),window.wallkitPostData.config.show_blur?s.classList.add("wkwp-content-blured"):s.style="display:none;"),!e&&i.config.paywall.content&&((e=document.createElement("div")).classList.add("wkwp-paywall-block"),e.insertAdjacentHTML("beforeend",i.config.paywall.content),s.parentNode.insertBefore(e,s)),w(e)),o.style="display:block;"}}break;default:c(t)}window.addEventListener("unlockContent",l),k("F=>wkCheckPostAccess.dispatchEvent.wkwpContentLocked"),window.dispatchEvent(new CustomEvent("wkwpContentLocked",{detail:t}))}).catch(e=>{console.log("WKWP ERROR: wkwpCheckAccessPromise",e)})}function l(e){k("F=>handleUnlockContentEvent.addEventListener.unlockContent",e),(1===window.wallkitPostData.config.wk_paywall_display_type?u:c)({allowed:!0})}function c(e){var t=window.wallkitSettings||{},n=document.querySelector(".wkwp-paywall"),i=document.querySelector(".wkwp-paywall .wkwp-content-inner");let o=document.querySelector(".wkwp-paywall .wkwp-paywall-block");k("F=>checkAccessHandlingCSS","\nresponse",e,"\nwindow.wallkitPostData",window.wallkitPostData,"\npostContentWrapper",n,"\npostContentBody",i,"\npostPaywallBlock",o,"\nwkContentBody",s,"\nwkPaywallBlock",r),i&&!s&&(s=i.innerHTML),e.allowed?(o&&o.remove(),i&&(s&&!1===t.config.skip_lorem&&(i.innerHTML=s),i.classList.remove("wkwp-content-blured"),i.style="display:block;")):(i&&(!1===t.config.skip_lorem&&(i.innerHTML=function(e){if(e&&0<e.querySelectorAll("p").length)return m(e.querySelectorAll("p").length);return""}(i)),window.wallkitPostData.config.show_blur?i.classList.add("wkwp-content-blured"):i.style="display:none;"),!o&&t.config.paywall.content&&((o=document.createElement("div")).classList.add("wkwp-paywall-block"),o.insertAdjacentHTML("beforeend",t.config.paywall.content),i.parentNode.insertBefore(o,i)),w(o)),n.style="display:block;"}function u(e){var t=window.wallkitSettings||{};let n=document.querySelector(".wkwp-paywall"),i="."+t.config.content_class_selector;t.config.custom_content_selector&&(i=t.config.custom_content_selector);var o=document.querySelector(""+i),s=document.querySelectorAll(i+" > *"),a=document.querySelectorAll(i+" > p");if(k("F=>checkAccessHandlingFrontend","\nwkPaywallBlock",e,"\nwkSettings",t,"\nwkwpPaywall",n,"\ntopElement",o,"\nallElements",s,"\nparagraphs",a),o)if(e.allowed)n&&n.remove(),s.forEach(e=>{e.classList.contains("wkwp-element")&&e.classList.remove("wkwp-element","wkwp-blur","wkwp-non-blur")});else if(o.querySelectorAll(".wkwp-element").length)w(n);else{var e=a.length>t.config.wk_free_paragraph&&0<=t.config.wk_free_paragraph?t.config.wk_free_paragraph:a.length,a=a[0<e?e-1:0],r=0===e?0:Array.prototype.indexOf.call(o.children,a)+1,l=["wkwp-element"];window.wallkitPostData.config.show_blur?l.push("wkwp-blur"):l.push("wkwp-non-blur"),k("F=>checkAccessHandlingFrontend.!allowed","\nshowParagraphs",e,"\nlastVisibleParagraph",a,"\nlastVisibleParagraphIndex",r,"\nitemClass",l);for(let e=r;e<s.length;e++)s[e].classList.add(...l);n||((n=document.createElement("div")).classList.add("wkwp-paywall"),n.insertAdjacentHTML("beforeend",`<div class="wkwp-paywall-block">${t.config.paywall.content}</div>`)),0===e?o.insertBefore(n,a):o.insertBefore(n,a.nextSibling),w(n),n.style="display:block;"}}function w(e){k("F=>paywallDisplayLoginLink",e),e&&(e=e.querySelector(".wallkit-paywall-block__login_plans"))&&(window.wk.authentication.isAuthenticated()?e.style="display:none;":e.style="display:block;")}function p(e){switch(k("F=>hideUserWithoutSessionInfo",e),e.target.id){case"auth-signup-link":case"auth-modal-close-btn":case"auth-modal-wrapper":case"auth-password-link":o()}e.target.classList.contains("wk-form-button")&&o()}function o(){var e=document.querySelector(".wk-user-update-info"),t=document.querySelector("#wk-email-auth-form"),n=document.querySelector("#wk-email-auth-form .wk-form .wk-form-header .wk-form__error");k("F=>hideUserWithoutSessionText","\nuserWithoutSessionInfo",e,"\nauthForm",t,"\nauthFormHeaderError",n),document.removeEventListener("click",p),e.remove(),t.style.display="block",n&&(n.style.display="")}function m(e){var t=["Inventore molestiae accusantium fuga delectus. Sed exercitationem aut quis reiciendis nesciunt dolore et. Voluptatibus at suscipit eius ratione perspiciatis provident. Totam minima quia occaecati maxime mollitia.","Laborum occaecati sapiente nesciunt voluptatem. Voluptatibus asperiores optio ut. Pariatur perspiciatis voluptatem beatae commodi libero modi.","Aut et ipsum beatae tenetur sit. Necessitatibus harum ea et. Natus aut quas sit dolores odio ut. Ipsum sit corporis maxime voluptatum et. Et labore id rerum nobis quia voluptatibus veniam dolores.","Sed aut repudiandae alias. Sunt est ab dignissimos quasi recusandae labore. Amet vitae illo debitis beatae nesciunt dolor dignissimos. Voluptatum consequuntur error at omnis. Tenetur quaerat facere placeat enim doloribus.","Id tempora quo placeat dolore. Eos sunt sapiente et facere. Ex facere et voluptate praesentium. Modi mollitia at non eum rerum perferendis. Nobis blanditiis consequatur incidunt.","Sint voluptas nam sed. Eligendi beatae corporis omnis ipsum facilis dicta a repudiandae. Suscipit et eligendi eveniet ipsum veritatis aut. Aspernatur adipisci fugit deserunt eos hic ut omnis. Corporis et itaque dicta similique.","Fugit dolores vitae iste qui. Dignissimos quo molestiae cumque. Sequi illo non saepe facere aut aliquid consequuntur sunt. Amet non illo dolor molestiae nulla eligendi quae. Id aut et velit quos sit ratione earum rerum.","Soluta error neque dolor perspiciatis mollitia. Voluptatem corporis doloribus fugiat et. Unde et rerum magni. Dolores nisi laudantium laboriosam voluptatem.","Dolores in illo exercitationem est enim pariatur quam corporis. Non ipsa sequi explicabo. Placeat earum aspernatur quod et quia.","Et sed amet ipsa. Qui et corrupti eaque et at dicta nesciunt vero. Est quasi eius possimus repellat ea ut. Inventore vel et possimus officiis quo consectetur similique. Culpa ut voluptatem non pariatur illum autem sapiente. Et et quidem est dolorum ab.","Amet id ipsam deleniti minima aut laboriosam. Odio ut reiciendis delectus repudiandae dolorem quaerat. Alias asperiores eum molestiae libero assumenda non voluptatibus quo. Et esse laboriosam ab velit et. Eligendi sint assumenda et.","Soluta ex voluptas minima et magnam est. Deserunt error molestiae veritatis amet. Quia provident sint molestiae omnis optio sunt sint. Commodi praesentium est perferendis inventore aut atque dolor doloribus. Minima enim velit eaque qui sed non dignissimos debitis. Rerum placeat in qui reprehenderit blanditiis nemo sed.","Magni dolore enim asperiores quae asperiores. Et quia eligendi ad quo aut labore ut iste. Quia qui esse aperiam eos illum exercitationem minus quod.","Sed ut dolorum sunt. Tempora incidunt aspernatur doloremque voluptatem quidem voluptatem magni. Est voluptatum minus id. Totam repudiandae reiciendis et.","Sint natus tenetur qui earum recusandae id optio. Dolore voluptates et accusamus et tempora sint. Dolores reiciendis iusto et quos aut. Sequi et officiis ipsum distinctio. Expedita voluptatibus corporis odio blanditiis iusto.","Ipsum dolores ut ut. Quia et voluptates accusamus neque quidem exercitationem dignissimos. Libero velit nemo omnis dolores ea repudiandae commodi accusamus. Sint tempore aut officia iste odit odio. Quibusdam sed debitis officiis.","Voluptatem quo est eius occaecati voluptatem tempore. Iste voluptas animi a voluptatem. Debitis est dolore aut fuga sunt voluptatem itaque assumenda. Id magnam officiis sint recusandae dolorum. Architecto numquam dignissimos quam corporis hic. Sit rerum amet provident.","Sed eum reiciendis aspernatur ab cupiditate. Ut atque dolores rerum veritatis voluptatem quidem ex voluptatum. Perspiciatis tempore quia quia animi vel distinctio. Id officia odit iusto facilis aliquid sequi eaque. Magnam eaque laudantium et et exercitationem.","Quod et ut voluptatibus assumenda sed. Nesciunt ea sed asperiores veniam temporibus blanditiis possimus. Quisquam eos voluptas assumenda molestiae.","Labore ipsum vitae dolorem est sed repellendus. Animi qui sequi similique dolorem sed vel omnis. Rerum saepe id atque animi."];let n=[];for(var i=0;i<e;i++)n.push(t[Math.floor(Math.random()*t.length)]);return n=n.map(e=>`<p>${e}</p>`).join("")}function k(e="",...t){void 0!==window.wallkitSettings.config&&window.wallkitSettings.config.debug&&console.log("WKWP DEBUG: ",e,...t)}window.addEventListener("DOMContentLoaded",e=>{k("DOMContentLoaded"),window.runInitWKPromise?(k("window.runInitWKPromise",window.runInitWKPromise),window.runInitWKPromise.then(e=>{k("window.runInitWKPromise.response",e),!0===e.init&&t()}).catch(e=>{console.log("WKWP ERROR: runInitWKPromise",e)})):(k("else runInitWkProcess"),t())})}();